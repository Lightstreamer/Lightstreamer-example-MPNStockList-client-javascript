<!DOCTYPE html>

<!--
  LIGHTSTREAMER - www.lightstreamer.com
  Basic Stock-List Demo

  Copyright (c) Lightstreamer Srl

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->

<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <title>Lightstreamer :: Basic Stock-List Demo with Web Push Notifications</title>
  <link rel="stylesheet" type="text/css" href="css/table.css" />
</head>

<body>
  <a href="https://github.com/Lightstreamer/Lightstreamer-example-MPNStockList-client-javascript"><img style="position: absolute; top: 0; right: 0; border: 0; z-index:1" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a>
  <div id="wrap">
        <a href="http://www.lightstreamer.com" target="_blank">
          <img src="images/logo.png" alt="LIGHTSTREAMER" width="280" hspace="0" border="0" /></a>
        <div class="demoTitle">BASIC STOCK-LIST DEMO<br/>WITH WEB PUSH NOTIFICATIONS</div>

    <form>

    <!-- stock table -->
    <div class="tableContainer">
      <table cellspacing="0" cellpadding="4" border="0" style="width: 100%;" >
        <tr class="tableTitle">
          <td style="text-align: left">Name</td>
          <td >Last</td>
          <td style="text-align: center">Time</td>
          <td >Change</td>
          <td >Bid Size</td>
          <td >Bid</td>
          <td >Ask</td>
          <td >Ask Size</td>
          <td >Min</td>
          <td >Max</td>
          <td >Ref.</td>
          <td >Open</td>
          <td align="center">Notify</td>
        </tr>
        <tr class="coldOdd">
          <td nowrap="nowrap" style="text-align: left"><div class="stockNameOdd" data-source="lightstreamer" data-grid="stocks" data-item="item1" data-field="stock_name">Loading...</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item1" data-field="last_price">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item1" data-field="time">-</div></td>
          <td nowrap="nowrap"><div data-source="lightstreamer" data-grid="stocks" data-item="item1" data-field="pct_change">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item1" data-field="bid_quantity">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item1" data-field="bid">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item1" data-field="ask">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item1" data-field="ask_quantity">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item1" data-field="min">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item1" data-field="max">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item1" data-field="ref_price">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item1" data-field="open_price">-</div></td>
          <td align="center"><input data-source="lightstreamer" data-grid="stocks" data-item="item1" data-field="notify" data-fieldtype="extra" data-update="checked" type="checkbox" onclick="return toggleMpnSubscription('item1',window.mpnErrorHandler)"></td>
        </tr>
        <tr class="coldEven">
          <td nowrap="nowrap" style="text-align: left"><div class="stockNameEven" data-source="lightstreamer" data-grid="stocks" data-item="item2" data-field="stock_name">Loading...</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item2" data-field="last_price">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item2" data-field="time">-</div></td>
          <td nowrap="nowrap"><div data-source="lightstreamer" data-grid="stocks" data-item="item2" data-field="pct_change">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item2" data-field="bid_quantity">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item2" data-field="bid">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item2" data-field="ask">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item2" data-field="ask_quantity">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item2" data-field="min">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item2" data-field="max">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item2" data-field="ref_price">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item2" data-field="open_price">-</div></td>
          <td align="center"><input data-source="lightstreamer" data-grid="stocks" data-item="item2" data-field="notify" data-fieldtype="extra" data-update="checked" type="checkbox" onclick="return toggleMpnSubscription('item2',window.mpnErrorHandler)"></td>
        </tr>
        <tr class="coldOdd">
          <td nowrap="nowrap" style="text-align: left"><div class="stockNameOdd" data-source="lightstreamer" data-grid="stocks" data-item="item3" data-field="stock_name">Loading...</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item3" data-field="last_price">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item3" data-field="time">-</div></td>
          <td nowrap="nowrap"><div data-source="lightstreamer" data-grid="stocks" data-item="item3" data-field="pct_change">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item3" data-field="bid_quantity">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item3" data-field="bid">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item3" data-field="ask">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item3" data-field="ask_quantity">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item3" data-field="min">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item3" data-field="max">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item3" data-field="ref_price">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item3" data-field="open_price">-</div></td>
          <td align="center"><input data-source="lightstreamer" data-grid="stocks" data-item="item3" data-field="notify" data-fieldtype="extra" data-update="checked" type="checkbox" onclick="return toggleMpnSubscription('item3',window.mpnErrorHandler)"></td>
        </tr>
        <tr class="coldEven">
          <td nowrap="nowrap" style="text-align: left"><div class="stockNameEven" data-source="lightstreamer" data-grid="stocks" data-item="item4" data-field="stock_name">Loading...</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item4" data-field="last_price">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item4" data-field="time">-</div></td>
          <td nowrap="nowrap"><div data-source="lightstreamer" data-grid="stocks" data-item="item4" data-field="pct_change">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item4" data-field="bid_quantity">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item4" data-field="bid">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item4" data-field="ask">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item4" data-field="ask_quantity">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item4" data-field="min">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item4" data-field="max">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item4" data-field="ref_price">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item4" data-field="open_price">-</div></td>
          <td align="center"><input data-source="lightstreamer" data-grid="stocks" data-item="item4" data-field="notify" data-fieldtype="extra" data-update="checked" type="checkbox" onclick="return toggleMpnSubscription('item4',window.mpnErrorHandler)"></td>
        </tr>
        <tr class="coldOdd">
          <td nowrap="nowrap" style="text-align: left"><div class="stockNameOdd" data-source="lightstreamer" data-grid="stocks" data-item="item5" data-field="stock_name">Loading...</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item5" data-field="last_price">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item5" data-field="time">-</div></td>
          <td nowrap="nowrap"><div data-source="lightstreamer" data-grid="stocks" data-item="item5" data-field="pct_change">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item5" data-field="bid_quantity">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item5" data-field="bid">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item5" data-field="ask">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item5" data-field="ask_quantity">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item5" data-field="min">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item5" data-field="max">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item5" data-field="ref_price">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item5" data-field="open_price">-</div></td>
          <td align="center"><input data-source="lightstreamer" data-grid="stocks" data-item="item5" data-field="notify" data-fieldtype="extra" data-update="checked" type="checkbox" onclick="return toggleMpnSubscription('item5',window.mpnErrorHandler)"></td>
        </tr>
        <tr class="coldEven">
          <td nowrap="nowrap" style="text-align: left"><div class="stockNameEven" data-source="lightstreamer" data-grid="stocks" data-item="item6" data-field="stock_name">Loading...</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item6" data-field="last_price">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item6" data-field="time">-</div></td>
          <td nowrap="nowrap"><div data-source="lightstreamer" data-grid="stocks" data-item="item6" data-field="pct_change">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item6" data-field="bid_quantity">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item6" data-field="bid">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item6" data-field="ask">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item6" data-field="ask_quantity">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item6" data-field="min">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item6" data-field="max">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item6" data-field="ref_price">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item6" data-field="open_price">-</div></td>
          <td align="center"><input data-source="lightstreamer" data-grid="stocks" data-item="item6" data-field="notify" data-fieldtype="extra" data-update="checked" type="checkbox" onclick="return toggleMpnSubscription('item6',window.mpnErrorHandler)"></td>
        </tr>
        <tr class="coldOdd">
          <td nowrap="nowrap" style="text-align: left"><div class="stockNameOdd" data-source="lightstreamer" data-grid="stocks" data-item="item7" data-field="stock_name">Loading...</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item7" data-field="last_price">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item7" data-field="time">-</div></td>
          <td nowrap="nowrap"><div data-source="lightstreamer" data-grid="stocks" data-item="item7" data-field="pct_change">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item7" data-field="bid_quantity">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item7" data-field="bid">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item7" data-field="ask">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item7" data-field="ask_quantity">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item7" data-field="min">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item7" data-field="max">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item7" data-field="ref_price">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item7" data-field="open_price">-</div></td>
          <td align="center"><input data-source="lightstreamer" data-grid="stocks" data-item="item7" data-field="notify" data-fieldtype="extra" data-update="checked" type="checkbox" onclick="return toggleMpnSubscription('item7',window.mpnErrorHandler)"></td>
        </tr>
        <tr class="coldEven">
          <td nowrap="nowrap" style="text-align: left"><div class="stockNameEven" data-source="lightstreamer" data-grid="stocks" data-item="item8" data-field="stock_name">Loading...</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item8" data-field="last_price">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item8" data-field="time">-</div></td>
          <td nowrap="nowrap"><div data-source="lightstreamer" data-grid="stocks" data-item="item8" data-field="pct_change">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item8" data-field="bid_quantity">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item8" data-field="bid">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item8" data-field="ask">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item8" data-field="ask_quantity">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item8" data-field="min">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item8" data-field="max">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item8" data-field="ref_price">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item8" data-field="open_price">-</div></td>
          <td align="center"><input data-source="lightstreamer" data-grid="stocks" data-item="item8" data-field="notify" data-fieldtype="extra" data-update="checked" type="checkbox" onclick="return toggleMpnSubscription('item8',window.mpnErrorHandler)"></td>
        </tr>
        <tr class="coldOdd">
          <td nowrap="nowrap" style="text-align: left"><div class="stockNameOdd" data-source="lightstreamer" data-grid="stocks" data-item="item9" data-field="stock_name">Loading...</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item9" data-field="last_price">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item9" data-field="time">-</div></td>
          <td nowrap="nowrap"><div data-source="lightstreamer" data-grid="stocks" data-item="item9" data-field="pct_change">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item9" data-field="bid_quantity">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item9" data-field="bid">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item9" data-field="ask">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item9" data-field="ask_quantity">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item9" data-field="min">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item9" data-field="max">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item9" data-field="ref_price">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item9" data-field="open_price">-</div></td>
          <td align="center"><input data-source="lightstreamer" data-grid="stocks" data-item="item9" data-field="notify" data-fieldtype="extra" data-update="checked" type="checkbox" onclick="return toggleMpnSubscription('item9',window.mpnErrorHandler)"></td>
        </tr>
        <tr class="coldEven">
          <td nowrap="nowrap" style="text-align: left"><div class="stockNameEven" data-source="lightstreamer" data-grid="stocks" data-item="item10" data-field="stock_name">Loading...</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item10" data-field="last_price">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item10" data-field="time">-</div></td>
          <td nowrap="nowrap"><div data-source="lightstreamer" data-grid="stocks" data-item="item10" data-field="pct_change">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item10" data-field="bid_quantity">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item10" data-field="bid">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item10" data-field="ask">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item10" data-field="ask_quantity">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item10" data-field="min">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item10" data-field="max">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item10" data-field="ref_price">-</div></td>
          <td><div data-source="lightstreamer" data-grid="stocks" data-item="item10" data-field="open_price">-</div></td>
          <td align="center"><input data-source="lightstreamer" data-grid="stocks" data-item="item10" data-field="notify" data-fieldtype="extra" data-update="checked" type="checkbox" onclick="return toggleMpnSubscription('item10',window.mpnErrorHandler)"></td>
        </tr>
        <tr>
        <td colspan="14" class="simulatedDataDisc">Simulated market data.</td>
        </tr>
      </table>
    </div>
    </form>
    
	<br/>
	<button id="mpnButton" onclick="register()" class="discMpnButton">Register for push notifications</button>
	<br/>
    <div id="mpnBox"></div>
    <br/>
	<p class="disc">
    <b>INSTRUCTIONS</b><br />
	<ol>
    <li>Click the "Register for push notifications" button to allow this web app to receive push notifications. A browser prompt will appear and you should choose "Allow".</li>
	<li>Click on any Notify checkbox to receive a push notification every time the price for that stock changes.<br>
	<b>NOTE</b>: the stock with most updates is Ations Europe, but be ready to receive tons of notifications if you choose that...</li>
	<li>Close or hide this browser tab, but keep at least one browser window open (Chrome and Firefox only; not needed for Safari).</li>
	<li>You will start receiving push notifications.</li>
	<li>To unsubscribe from the notifications, reopen this web app and deselect the Notify checkboxes.</li>
	</ol>
	</p>
       
    <!-- load Firebase libraries -->
    <!-- NB keep the imports in synch with firebase-messaging-sw.js -->
    <script src="https://www.gstatic.com/firebasejs/7.7.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.7.0/firebase-messaging.js"></script>

    <!-- load Lightstreamer libraries -->
    <script src="https://unpkg.com/lightstreamer-client-web/lightstreamer.min.js" data-lightstreamer-ns="Ls"></script>

    <script src="js/env.js"></script>
    <script src="js/const.js"></script>
    <script src="js/lsMpn.js"></script>
    <script src="js/index.js"></script>

  </div>

</body>

</html>